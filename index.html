<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <link rel="icon" href="./V.png">
    <link rel="stylesheet" href="./styles.css">
    <title>Calculadora</title>
</head>
<body>
<div class="titulo"><h2>Calculadora Vmajadas</h2></div>

<div id="calculadora">
<div id="pantalla">
    0
</div>
<table>
    <tr>
        <th><button id="btn1">1</button></th>
        <th><button id="btn2">2</button></th>
        <th><button id="btn3">3</button></th>
        <th><button id="btnMas">+</button></th>
    </tr>
    <tr>
        <th><button id="btn4">4</button></th>
        <th><button id="btn5">5</button></th>
        <th><button id="btn6">6</button></th>
        <th><button id="btnMenos">-</button></th>
    </tr>
    <tr>
        <th><button id="btn7">7</button></th>
        <th><button id="btn8">8</button></th>
        <th><button id="btn9">9</button></th>
        <th><button id="btnIgual">=</button></th>
    </tr>
    <tr>
        <th><button id="btnBorrar">üóëÔ∏è</button></th>
        <th><button id="btn0">0</button></th>
        <th><button id="btnDividir">/</button></th>
        <th><button id="btnMultiplicar">X</button></th>
    </tr>
</table>
</div>
<div>
    <h2>Selecciona color de calculadora</h2>
    <label>
    <select id="color">
        <option value="default">Modo Default</option>
        <option value="oscuro">Modo Oscuro</option>
        <option value="rosa">Modo Rosa</option>
        <option value="verde">Modo verde</option>
    </select>
    </label>
</div>
<script>
    // Valor donde guardamos el n√∫mero que escribimos
    let numeroActual = "";
    // Pantalla donde mostraremos el n√∫mero
    const pantalla = document.getElementById("pantalla");

    // Recogemos la ID de los botones pulsados, con getElementById, y con el listener addEventListener,
    // Recordar que para m√°s adelante es recomendable darle un nombre a las funciones

    document.getElementById("btn1").addEventListener("click", function() {
        numeroActual = numeroActual + "1";
        pantalla.textContent = numeroActual;
    });

    document.getElementById("btn2").addEventListener("click", function() {
        numeroActual = numeroActual + "2";
        pantalla.textContent = numeroActual;
    });

    document.getElementById("btn3").addEventListener("click", function() {
        numeroActual = numeroActual + "3";
        pantalla.textContent = numeroActual;
    });

    document.getElementById("btn4").addEventListener("click", function() {
        numeroActual = numeroActual + "4";
        pantalla.textContent = numeroActual;
    });

    document.getElementById("btn5").addEventListener("click", function() {
        numeroActual = numeroActual + "5";
        pantalla.textContent = numeroActual;
    });

    document.getElementById("btn6").addEventListener("click", function() {
        numeroActual = numeroActual + "6";
        pantalla.textContent = numeroActual;
    });

    document.getElementById("btn7").addEventListener("click", function() {
        numeroActual = numeroActual + "7";
        pantalla.textContent = numeroActual;
    });

    document.getElementById("btn8").addEventListener("click", function() {
        numeroActual = numeroActual + "8";
        pantalla.textContent = numeroActual;
    });

    document.getElementById("btn9").addEventListener("click", function() {
        numeroActual = numeroActual + "9";
        pantalla.textContent = numeroActual;
    });

    document.getElementById("btn0").addEventListener("click", function() {
        numeroActual = numeroActual + "0";
        pantalla.textContent = numeroActual;
    });

    // Operaciones
    let operador ="";
    let guardar="";
    // Guardamos resultados
    let resultado = "";
    // En las operaciones b√°sicas, guardamos primero el n√∫mero actual en el resultado si no hay nada guardado
    // Despu√©s guardamos en la variable guardar la variable result√°do y el operador
    // Si hay algo ya guardado, primero, se a√±ade a la variable result√°do la variable guardar y el n√∫mero actual
    // Despu√©s, se a√±ade a la variable guardar la variable result√°do y el operador
    document.getElementById("btnMas").addEventListener("click", function() {
        if(guardar ===""){
            resultado = numeroActual;
            numeroActual = "";
            pantalla.textContent = "0";
            operador = "+";
            guardar = resultado + operador;
        } else {
            resultado = guardar + numeroActual;
            operador = "+"
            numeroActual = "";
            pantalla.textContent = "0";
            guardar = resultado + operador;
        }
    });
    document.getElementById("btnMenos").addEventListener("click", function() {
        if(guardar ===""){
            resultado = numeroActual;
            numeroActual = "";
            pantalla.textContent = "0";
            operador = "-";
            guardar = resultado + operador;
        } else {
            resultado = guardar + numeroActual;
            operador = "-"
            numeroActual = "";
            pantalla.textContent = "0";
            guardar = resultado + operador;
        }

    });
    // En las divisiones, verific√°mos que el primer n√∫mero no sea 0, en caso de ser a s√≠, mandamos mensaje error
    // Tras ello continuamos como con el resto de operaciones
    document.getElementById("btnDividir").addEventListener("click", function() {
    if (numeroActual === "0") {
            resultado="";
            numeroActual = "";
            guardar = "";
            pantalla.textContent = "ERROR";
        } else {
        if(guardar ===""){
            resultado = numeroActual;
            numeroActual = "";
            pantalla.textContent = "0";
            operador = "/";
            guardar = resultado + operador;
        } else {
            resultado = guardar + numeroActual;
            operador = "/"
            numeroActual = "";
            pantalla.textContent = "0";
            guardar = resultado + operador;
        } }
    });
    document.getElementById("btnMultiplicar").addEventListener("click", function() {
        if(guardar ===""){
            resultado = numeroActual;
            numeroActual = "";
            pantalla.textContent = "0";
            operador = "*";
            guardar = resultado + operador;
        } else {
            resultado = guardar + numeroActual;
            operador = "*"
            numeroActual = "";
            pantalla.textContent = "0";
            guardar = resultado + operador;
        }

    });
    // Para dar el resultado, primero a√±adimos a la variable result√°do la variable guardar y el √∫ltimo n√∫mero introducido
    // Creamos la constante calcular la cual crea una funci√≥n con la operaci√≥n escrita en "resultado" y la ejecuta
    // Para obtener el valor final
    // Tras obtener el resultado, verificamos que el resultado no sea infinito (en c√°so que se dividiera para 0) o NaN
    // En caso de que sea infinito o NaN, mandamos mensaje error
    // Si es correcto, mostramos el resultado y con .toFixed(2) mostramos dos decimales para evitar mostrar demasiados
    document.getElementById("btnIgual").addEventListener("click", function() {
        resultado = guardar + numeroActual;
        const calcular = new Function('return ' + resultado);
        resultado = calcular();
        if(Number.isNaN(resultado) || Number.isFinite(resultado)){
            pantalla.textContent = resultado.toFixed(2);
        }else{
            pantalla.textContent = "Error";
        }
});
    // Con el bot√≥n borrar vaciamos las variables resultado, numeroActual y guardar, y mostramos 0 en la pantalla
    document.getElementById("btnBorrar").addEventListener("click", function() {
        resultado="";
        numeroActual = "";
        guardar = "";
        pantalla.textContent = "0";
    });
    // Cambiar colores
    // Creamos una variable calculadora que obtiene la id de la calculadora
    // Recogemos la id del selector de colores con getElementById y con el listener addEventListener
    // Primero borramos los temas de la lista de clases (Por ahora al ser algo peque√±o no causa ning√∫n problema)
    // Tras ello a√±adimos a la lista de clases el tema seleccionado
    let calculadora = document.getElementById("calculadora");
    document.getElementById("color").addEventListener("change", function() {
        calculadora.classList.remove("theme-default","theme-oscuro","theme-rosa","theme-verde");
        calculadora.classList.add("theme-" + this.value);
    });

</script>
</body>
</html>
